# ===== å±æ€§ç³»ç»Ÿé…ç½® =====

# æ˜¯å¦å¯ç”¨å±æ€§ç³»ç»Ÿ
enabled: true

# æ—¥å¿—é…ç½®
logging:
  # æ˜¯å¦å¯ç”¨è¯¦ç»†æ—¥å¿—
  enabled: true
  # æ˜¯å¦åœ¨èŠå¤©æ¡†æ˜¾ç¤ºä¼¤å®³ä¿¡æ¯
  show-damage-in-chat: true

# ç©å®¶åŠ å…¥æœåŠ¡å™¨æ—¶æ˜¯å¦è‡ªåŠ¨åˆ·æ–°å±æ€§
auto-refresh-on-join: true

# æ•°æ®åº“é…ç½®
database:
  # å­˜å‚¨ç±»å‹: sqlite æˆ– mysql
  type: sqlite
  
  # MySQLé…ç½® (ä»…å½“typeä¸ºmysqlæ—¶ç”Ÿæ•ˆ)
  mysql:
    host: localhost
    port: 3306
    database: hotelroom
    username: root
    password: password
    # è¿æ¥æ± é…ç½®
    pool-size: 10

# ===== ç©å®¶é»˜è®¤å±æ€§ =====
# æ³¨æ„ï¼šåªæœ‰ health å’Œ physical_damage æœ‰é»˜è®¤å€¼
# å…¶ä»–å±æ€§é»˜è®¤ä¸º0ï¼Œå¯é€šè¿‡è£…å¤‡ã€ç§æ—ã€è‡ªå®šä¹‰å±æ€§ç³»ç»Ÿè·å¾—
default-attributes:
  # åŸºç¡€å±æ€§ï¼ˆæ ¸å¿ƒï¼‰
  health: 20.0              # ç”Ÿå‘½å€¼ï¼ˆ20=åŸç‰ˆè¡€é‡ï¼‰
  physical_damage: 1.0      # ç‰©ç†ä¼¤å®³ï¼ˆåŸºç¡€æ”»å‡»åŠ›ï¼‰
  
  # ä»¥ä¸‹å±æ€§é»˜è®¤ä¸º0ï¼Œé€šè¿‡è£…å¤‡/ç§æ—/è‡ªå®šä¹‰ç³»ç»Ÿè·å¾—
  # æ”»å‡»å±æ€§
  magic_damage: 0.0         # é­”æ³•ä¼¤å®³
  attack_speed: 1.0         # æ”»å‡»é€Ÿåº¦ï¼ˆ1.0=åŸç‰ˆï¼‰
  
  # é˜²å¾¡å±æ€§
  physical_defense: 0.0     # ç‰©ç†é˜²å¾¡
  magic_defense: 0.0        # é­”æ³•é˜²å¾¡
  armor: 0.0                # æŠ¤ç”²å€¼
  
  # æš´å‡»å±æ€§
  crit_rate: 0.0            # æš´å‡»ç‡ (%)
  crit_damage: 0.0        # æš´å‡»ä¼¤å®³ (%) - è§¦å‘æš´å‡»æ—¶çš„ä¼¤å®³å€ç‡
  
  # ç©¿é€å±æ€§
  armor_penetration: 0.0    # æŠ¤ç”²ç©¿é€
  magic_penetration: 0.0    # é­”æ³•ç©¿é€
  
  # ç”Ÿå‘½æ¢å¤
  health_regen: 0.0         # ç”Ÿå‘½æ¢å¤/ç§’
  health_regen_percent: 0.0 # ç”Ÿå‘½æ¢å¤ç™¾åˆ†æ¯”/ç§’
  
  # é­”æ³•å±æ€§
  mana: 0.0                 # é­”æ³•å€¼
  max_mana: 0.0             # æœ€å¤§é­”æ³•å€¼
  mana_regen: 0.0           # é­”æ³•æ¢å¤/ç§’
  mana_regen_percent: 0.0   # é­”æ³•æ¢å¤ç™¾åˆ†æ¯”/ç§’
  
  # ç§»åŠ¨å±æ€§
  movement_speed: 0.1       # ç§»åŠ¨é€Ÿåº¦ï¼ˆ0.1=åŸç‰ˆé€Ÿåº¦ï¼‰
  movement_speed_percent: 0.0 # ç§»åŠ¨é€Ÿåº¦ç™¾åˆ†æ¯”åŠ æˆ
  
  # å…¶ä»–å±æ€§
  dodge_rate: 0.0           # é—ªé¿ç‡ (%)
  block_rate: 0.0           # æ ¼æŒ¡ç‡ (%)
  lifesteal: 0.0            # ç”Ÿå‘½å·å– (%)
  cooldown_reduction: 0.0   # å†·å´ç¼©å‡ (%)
  exp_bonus: 0.0            # ç»éªŒåŠ æˆ (%)
  drop_rate_bonus: 0.0      # æ‰è½ç‡åŠ æˆ (%)

# ===== å±æ€§æ˜¾ç¤ºé…ç½® =====
display:
  # å±æ€§æ˜¾ç¤ºåç§° (ç”¨äºGUIå’Œæ¶ˆæ¯æ˜¾ç¤º)
  names:
    health: "Â§c ç”Ÿå‘½å€¼"
    physical_damage: "Â§6 ç‰©ç†ä¼¤å®³"
    magic_damage: "Â§bé­”æ³•ä¼¤å®³"
    attack_speed: "Â§e æ”»å‡»é€Ÿåº¦"
    physical_defense: "Â§7 ç‰©ç†é˜²å¾¡"
    magic_defense: "Â§d é­”æ³•é˜²å¾¡"
    armor: "Â§7 æŠ¤ç”²å€¼"
    crit_rate: "Â§e æš´å‡»ç‡"
    crit_damage: "Â§6 æš´å‡»ä¼¤å®³"
    armor_penetration: "Â§c æŠ¤ç”²ç©¿é€"
    magic_penetration: "Â§d é­”æ³•ç©¿é€"
    health_regen: "Â§a ç”Ÿå‘½æ¢å¤"
    health_regen_percent: "Â§a ç”Ÿå‘½æ¢å¤%"
    mana: "Â§b é­”æ³•å€¼"
    max_mana: "Â§b æœ€å¤§é­”æ³•å€¼"
    mana_regen: "Â§3 é­”æ³•æ¢å¤"
    mana_regen_percent: "Â§3 é­”æ³•æ¢å¤%"
    movement_speed: "Â§fâ¤ ç§»åŠ¨é€Ÿåº¦"
    movement_speed_percent: "Â§fâ¤ ç§»åŠ¨é€Ÿåº¦%"
    dodge_rate: "Â§fâ—ˆ é—ªé¿ç‡"
    block_rate: "Â§7â—ˆ æ ¼æŒ¡ç‡"
    lifesteal: "Â§c ç”Ÿå‘½å·å–"
    cooldown_reduction: "Â§b å†·å´ç¼©å‡"
    exp_bonus: "Â§a ç»éªŒåŠ æˆ"
    drop_rate_bonus: "Â§e æ‰è½ç‡åŠ æˆ"

# ===== å±æ€§è®¡ç®—é…ç½® =====
calculation:
  # æŠ¤ç”²å‡ä¼¤å…¬å¼: damage_reduction = armor / (armor + 100)
  armor-effectiveness: 100
  
  # æš´å‡»ä¼¤å®³è®¡ç®—: final_damage = base_damage * (crit_damage / 100)
  # æš´å‡»ç‡ä¸Šé™ (%)
  max-crit-rate: 100.0
  
  # é—ªé¿ç‡ä¸Šé™ (%)
  max-dodge-rate: 75.0
  
  # æ ¼æŒ¡ç‡ä¸Šé™ (%)
  max-block-rate: 75.0
  
  # å†·å´ç¼©å‡ä¸Šé™ (%)
  max-cooldown-reduction: 80.0

# ===== è‡ªå®šä¹‰å±æ€§ç³»ç»Ÿ =====
# æ”¯æŒæœåŠ¡å™¨ç®¡ç†å‘˜è‡ªå®šä¹‰å±æ€§å’Œæ•ˆæœè®¡ç®—
custom-attributes:
  # ç¤ºä¾‹ï¼šçœŸå®ä¼¤å®³å±æ€§
  true_damage:
    display-name: "Â§câš¡ çœŸå®ä¼¤å®³"
    default-value: 0.0
    min-value: 0.0
    max-value: 1000.0
    # å±æ€§ç±»å‹ï¼šoffensive(æ”»å‡»), defensive(é˜²å¾¡), utility(è¾…åŠ©), passive(è¢«åŠ¨)
    type: offensive
    # æ•ˆæœè§¦å‘æ—¶æœºï¼šon_attack(æ”»å‡»æ—¶), on_defend(å—å‡»æ—¶), on_kill(å‡»æ€æ—¶), passive(æŒç»­)
    trigger: on_attack
    # è®¡ç®—å…¬å¼ï¼ˆæ”¯æŒçš„å˜é‡è§ä¸‹æ–¹è¯´æ˜ï¼‰
    formula: "damage + {true_damage}"
    # æ˜¯å¦å¿½ç•¥é˜²å¾¡
    ignore-defense: true
    # æè¿°
    description: "é€ æˆæ— è§†é˜²å¾¡çš„é¢å¤–ä¼¤å®³"
  
  # ç¤ºä¾‹ï¼šå¸è¡€å±æ€§ï¼ˆä¸åŒäºlifestealï¼Œå¯è‡ªå®šä¹‰è®¡ç®—ï¼‰
  vampire:
    display-name: "Â§4ğŸ©¸ å¸è¡€"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: offensive
    trigger: on_attack
    # å¸è¡€å…¬å¼ï¼šä¼¤å®³çš„ç™¾åˆ†æ¯” + å›ºå®šå€¼
    formula: "damage * {vampire} / 100"
    # æ•ˆæœç±»å‹ï¼šheal(æ²»ç–—), damage(ä¼¤å®³), buff(å¢ç›Š), debuff(å‡ç›Š)
    effect-type: heal
    # æ˜¯å¦æ˜¾ç¤ºæ¶ˆæ¯
    show-message: true
    message: "Â§c+{value} Â§4ç”Ÿå‘½"
    description: "æ”»å‡»æ—¶æ¢å¤é€ æˆä¼¤å®³çš„ä¸€å®šç™¾åˆ†æ¯”ç”Ÿå‘½å€¼"
  
  # ç¤ºä¾‹ï¼šåä¼¤å±æ€§
  thorns:
    display-name: "Â§cğŸ”± åä¼¤"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: defensive
    trigger: on_defend
    # åä¼¤å…¬å¼ï¼šå—åˆ°ä¼¤å®³çš„ç™¾åˆ†æ¯”
    formula: "damage * {thorns} / 100"
    effect-type: damage
    # åä¼¤ç›®æ ‡ï¼šattacker(æ”»å‡»è€…)
    target: attacker
    show-message: true
    message: "Â§7âš¡ åä¼¤ Â§c{value}"
    description: "å—åˆ°æ”»å‡»æ—¶åå¼¹ä¸€å®šç™¾åˆ†æ¯”çš„ä¼¤å®³ç»™æ”»å‡»è€…"
  
  # ç¤ºä¾‹ï¼šç‹‚æš´å±æ€§ï¼ˆè¡€é‡è¶Šä½ä¼¤å®³è¶Šé«˜ï¼‰
  berserk:
    display-name: "Â§6âš” ç‹‚æš´"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: offensive
    trigger: on_attack
    # å¤æ‚å…¬å¼ï¼šæ ¹æ®è¡€é‡ç™¾åˆ†æ¯”è®¡ç®—ä¼¤å®³åŠ æˆ
    # health_percent = å½“å‰è¡€é‡ç™¾åˆ†æ¯”(0-100)
    formula: "damage * (1 + {berserk} * (100 - {health_percent}) / 10000)"
    description: "è¡€é‡è¶Šä½ï¼Œé€ æˆçš„ä¼¤å®³è¶Šé«˜"
  
  # ç¤ºä¾‹ï¼šè‡´å‘½ä¸€å‡»ï¼ˆä½æ¦‚ç‡é€ æˆç›®æ ‡å½“å‰ç”Ÿå‘½å€¼ç™¾åˆ†æ¯”ä¼¤å®³ï¼‰
  execute:
    display-name: "Â§cğŸ’€ æ–©æ€"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: offensive
    trigger: on_attack
    # è§¦å‘æ¦‚ç‡ï¼ˆ%ï¼‰
    chance: "{execute}"
    formula: "target_health * ({execute} / 100)"
    effect-type: damage
    target: victim
    show-message: true
    message: "Â§cğŸ’€ æ–©æ€ï¼Â§4{value}"
    description: "æœ‰æ¦‚ç‡é€ æˆç›®æ ‡å½“å‰ç”Ÿå‘½å€¼ç™¾åˆ†æ¯”ä¼¤å®³"

  # ===== ç”¨æˆ·å®šåˆ¶å±æ€§ =====
  
  # 1. PVPä¼¤å®³ï¼ˆå¯¹ç©å®¶çš„é¢å¤–ä¼¤å®³ï¼‰
  pvp_damage:
    display-name: "Â§câš”ï¸ PVPä¼¤å®³"
    default-value: 0.0
    min-value: 0.0
    max-value: 1000.0
    type: offensive
    trigger: on_attack
    formula: "{pvp_damage}"
    effect-type: damage
    target: victim
    description: "å¯¹ç©å®¶é€ æˆé¢å¤–ç‰©ç†ä¼¤å®³"

  # 2. PVEä¼¤å®³ï¼ˆå¯¹ç”Ÿç‰©çš„é¢å¤–ä¼¤å®³ï¼‰
  pve_damage:
    display-name: "Â§eğŸº PVEä¼¤å®³"
    default-value: 0.0
    min-value: 0.0
    max-value: 1000.0
    type: offensive
    trigger: on_attack
    formula: "{pve_damage}"
    effect-type: damage
    target: victim
    description: "å¯¹ç”Ÿç‰©é€ æˆé¢å¤–ç‰©ç†ä¼¤å®³"

  # 3. å‘½ä¸­å‡ ç‡ï¼ˆæŠµæ¶ˆç›®æ ‡é—ªé¿ç‡ï¼‰
  hit_rate:
    display-name: "Â§ağŸ¯ å‘½ä¸­å‡ ç‡"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: offensive
    trigger: on_attack
    formula: "0"
    description: "å¢åŠ æ”»å‡»å‘½ä¸­æ¦‚ç‡ï¼ŒæŠµæ¶ˆç›®æ ‡é—ªé¿ç‡"

  # 4. å‰Šå¼±ä¼¤å®³ï¼ˆå‡å°‘å—åˆ°çš„ä¼¤å®³ï¼‰
  damage_reduction:
    display-name: "Â§bğŸ›¡ï¸ å‰Šå¼±ä¼¤å®³"
    default-value: 0.0
    min-value: 0.0
    max-value: 100.0
    type: defensive
    trigger: on_defend
    formula: "-damage * {damage_reduction} / 100"
    effect-type: damage
    target: victim
    description: "å‡å°‘å—åˆ°çš„æ‰€æœ‰ä¼¤å®³ç™¾åˆ†æ¯”"

# ===== è‡ªå®šä¹‰è®¡ç®—å…¬å¼è¯´æ˜ =====
# å¯ç”¨å˜é‡ï¼š
#   {å±æ€§å}          - ç©å®¶çš„å±æ€§å€¼ï¼ˆå¦‚ {physical_damage}, {vampire}ï¼‰
#   {damage}          - åŸºç¡€ä¼¤å®³å€¼
#   {final_damage}    - æœ€ç»ˆä¼¤å®³å€¼
#   {health}          - å½“å‰ç”Ÿå‘½å€¼
#   {max_health}      - æœ€å¤§ç”Ÿå‘½å€¼
#   {health_percent}  - ç”Ÿå‘½å€¼ç™¾åˆ†æ¯”(0-100)
#   {target_health}   - ç›®æ ‡å½“å‰ç”Ÿå‘½å€¼
#   {target_max_health} - ç›®æ ‡æœ€å¤§ç”Ÿå‘½å€¼
#   {target_armor}    - ç›®æ ‡æŠ¤ç”²å€¼
#   {level}           - ç©å®¶ç­‰çº§
#   {distance}        - ä¸ç›®æ ‡çš„è·ç¦»
#
# æ”¯æŒçš„è¿ç®—ç¬¦ï¼š
#   + - * / % (åŠ å‡ä¹˜é™¤å–æ¨¡)
#   () æ‹¬å·
#   max(a,b) min(a,b) - å–æœ€å¤§æœ€å°å€¼
#   sqrt(x) pow(x,y) - å¼€æ–¹å’Œå¹‚è¿ç®—
#
# å…¬å¼ç¤ºä¾‹ï¼š
#   "damage + {physical_damage}"                    # ä¼¤å®³ + ç‰©ç†ä¼¤å®³
#   "damage * (1 + {crit_damage} / 100)"           # æš´å‡»ä¼¤å®³è®¡ç®—
#   "max(0, damage - {armor} * 0.5)"               # æŠ¤ç”²å‡ä¼¤
#   "{health} * {lifesteal} / 100"                 # ç”Ÿå‘½å·å–
#   "damage * pow(1.1, {level})"                    # ç­‰çº§åŠ æˆ
